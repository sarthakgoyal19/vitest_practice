{
  "version": 3,
  "sources": ["../../wait-for-expect/lib/helpers.js", "../../wait-for-expect/lib/index.js"],
  "sourcesContent": ["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getSetTimeoutFn = getSetTimeoutFn;\n/* eslint-disable import/prefer-default-export */\n/* eslint-env jest */\n// Used to avoid using Jest's fake timers and Date.now mocks\n// See https://github.com/TheBrainFamily/wait-for-expect/issues/4 and\n// https://github.com/TheBrainFamily/wait-for-expect/issues/12 for more info\nvar globalObj = typeof window === \"undefined\" ? global : window;\n\n// Currently this fn only supports jest timers, but it could support other test runners in the future.\nfunction runWithRealTimers(callback) {\n  var usingJestFakeTimers = typeof jest !== \"undefined\" &&\n  // @ts-ignore\n  setTimeout.clock != null &&\n  // @ts-ignore\n  typeof setTimeout.clock.Date === \"function\";\n  if (usingJestFakeTimers) {\n    jest.useRealTimers();\n  }\n  var callbackReturnValue = callback();\n  if (usingJestFakeTimers) {\n    jest.useFakeTimers();\n  }\n  return callbackReturnValue;\n}\nfunction getSetTimeoutFn() {\n  return runWithRealTimers(function () {\n    return globalObj.setTimeout;\n  });\n}", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _helpers = require(\"./helpers\");\nvar defaults = {\n  timeout: 4500,\n  interval: 50\n};\n\n/**\n * Waits for the expectation to pass and returns a Promise\n *\n * @param  expectation  Function  Expectation that has to complete without throwing\n * @param  timeout  Number  Maximum wait interval, 4500ms by default\n * @param  interval  Number  Wait-between-retries interval, 50ms by default\n * @return  Promise  Promise to return a callback result\n */\nvar waitForExpect = function waitForExpect(expectation) {\n  var timeout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaults.timeout;\n  var interval = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaults.interval;\n  var setTimeout = (0, _helpers.getSetTimeoutFn)();\n\n  // eslint-disable-next-line no-param-reassign\n  if (interval < 1) interval = 1;\n  var maxTries = Math.ceil(timeout / interval);\n  var tries = 0;\n  return new Promise(function (resolve, reject) {\n    var rejectOrRerun = function rejectOrRerun(error) {\n      if (tries > maxTries) {\n        reject(error);\n        return;\n      }\n      // eslint-disable-next-line no-use-before-define\n      setTimeout(runExpectation, interval);\n    };\n    function runExpectation() {\n      tries += 1;\n      try {\n        Promise.resolve(expectation()).then(function () {\n          return resolve();\n        })[\"catch\"](rejectOrRerun);\n      } catch (error) {\n        rejectOrRerun(error);\n      }\n    }\n    setTimeout(runExpectation, 0);\n  });\n};\nwaitForExpect.defaults = defaults;\nvar _default = exports[\"default\"] = waitForExpect;\nmodule.exports = exports.default;\nmodule.exports.default = exports.default;"],
  "mappings": ";;;;;AAAA;AAAA;AAAA;AAEA,WAAO,eAAe,SAAS,cAAc;AAAA,MAC3C,OAAO;AAAA,IACT,CAAC;AACD,YAAQ,kBAAkB;AAM1B,QAAI,YAAY,OAAO,WAAW,cAAc,SAAS;AAGzD,aAAS,kBAAkB,UAAU;AACnC,UAAI,sBAAsB,OAAO,SAAS;AAAA,MAE1C,WAAW,SAAS;AAAA,MAEpB,OAAO,WAAW,MAAM,SAAS;AACjC,UAAI,qBAAqB;AACvB,aAAK,cAAc;AAAA,MACrB;AACA,UAAI,sBAAsB,SAAS;AACnC,UAAI,qBAAqB;AACvB,aAAK,cAAc;AAAA,MACrB;AACA,aAAO;AAAA,IACT;AACA,aAAS,kBAAkB;AACzB,aAAO,kBAAkB,WAAY;AACnC,eAAO,UAAU;AAAA,MACnB,CAAC;AAAA,IACH;AAAA;AAAA;;;ACjCA;AAAA;AAEA,WAAO,eAAe,SAAS,cAAc;AAAA,MAC3C,OAAO;AAAA,IACT,CAAC;AACD,YAAQ,SAAS,IAAI;AACrB,QAAI,WAAW;AACf,QAAI,WAAW;AAAA,MACb,SAAS;AAAA,MACT,UAAU;AAAA,IACZ;AAUA,QAAI,gBAAgB,SAASA,eAAc,aAAa;AACtD,UAAI,UAAU,UAAU,SAAS,KAAK,UAAU,CAAC,MAAM,SAAY,UAAU,CAAC,IAAI,SAAS;AAC3F,UAAI,WAAW,UAAU,SAAS,KAAK,UAAU,CAAC,MAAM,SAAY,UAAU,CAAC,IAAI,SAAS;AAC5F,UAAIC,eAAc,GAAG,SAAS,iBAAiB;AAG/C,UAAI,WAAW,EAAG,YAAW;AAC7B,UAAI,WAAW,KAAK,KAAK,UAAU,QAAQ;AAC3C,UAAI,QAAQ;AACZ,aAAO,IAAI,QAAQ,SAAU,SAAS,QAAQ;AAC5C,YAAI,gBAAgB,SAASC,eAAc,OAAO;AAChD,cAAI,QAAQ,UAAU;AACpB,mBAAO,KAAK;AACZ;AAAA,UACF;AAEA,UAAAD,YAAW,gBAAgB,QAAQ;AAAA,QACrC;AACA,iBAAS,iBAAiB;AACxB,mBAAS;AACT,cAAI;AACF,oBAAQ,QAAQ,YAAY,CAAC,EAAE,KAAK,WAAY;AAC9C,qBAAO,QAAQ;AAAA,YACjB,CAAC,EAAE,OAAO,EAAE,aAAa;AAAA,UAC3B,SAAS,OAAO;AACd,0BAAc,KAAK;AAAA,UACrB;AAAA,QACF;AACA,QAAAA,YAAW,gBAAgB,CAAC;AAAA,MAC9B,CAAC;AAAA,IACH;AACA,kBAAc,WAAW;AACzB,QAAI,WAAW,QAAQ,SAAS,IAAI;AACpC,WAAO,UAAU,QAAQ;AACzB,WAAO,QAAQ,UAAU,QAAQ;AAAA;AAAA;",
  "names": ["waitForExpect", "setTimeout", "rejectOrRerun"]
}
